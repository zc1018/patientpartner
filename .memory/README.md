# 三重记忆系统

## 结构

```
.memory/
├── permanent/          # 永久记忆（重要信息、身份、规则）
│   └── memory.json
├── daily/              # 每日记忆（对话提炼、每日结束存储）
│   └── 2026-02-26.json
└── experience/         # 经验库（问题与解决方案）
    └── experience.json
```

## 使用指南

### 1. 永久记忆

**存储内容**：
- 用户身份、角色、专业领域
- 项目核心信息、关键指标
- 沟通规则、代码风格偏好
- 重要历史里程碑

**更新时机**：
- 项目重大变更
- 用户角色变化
- 规则调整

**读取方式**：
```bash
cat .memory/permanent/memory.json
```

### 2. 每日记忆

**存储内容**：
- 当日主要活动
- 关键决策与洞察
- 待办事项
- 数据统计

**更新时机**：
- 每日会话结束时
- 重要里程碑完成时
- 自我判断值得记录时

**命名规则**：`YYYY-MM-DD.json`

### 3. 经验库

**存储内容**：
- 踩过的坑（带解决方案）
- 有效的架构模式
- Agent协作经验
- 最佳实践

**更新时机**：
- 遇到新问题并解决后
- 验证某种方法有效后
- 犯错后总结

**条目结构**：
```json
{
  "id": "EXP-XXX",
  "category": "分类",
  "title": "标题",
  "description": "问题描述",
  "symptom": "症状",
  "solution": "解决方案",
  "severity": "P0/P1/P2",
  "date": "YYYY-MM-DD"
}
```

## 使用流程

### 会话开始时
1. 读取永久记忆了解上下文
2. 读取最近1-3天的每日记忆了解进展

### 会话进行中
- 遇到新问题 → 记录到经验库
- 完成重要工作 → 更新当日记忆

### 会话结束时
- 整理当日记忆
- 如果有新经验，添加到经验库

## 提示词模板

**读取所有记忆**：
```
请读取 .memory/permanent/memory.json、最近3天的daily记忆、和experience/experience.json，了解上下文后...
```

**添加经验**：
```
请将以下经验添加到.memory/experience/experience.json：
- 类别：Python陷阱
- 标题：xxx
- 描述：xxx
- 解决方案：xxx
```

**结束当日会话**：
```
请将今日工作总结到.memory/daily/2026-02-26.json，包括...
```
